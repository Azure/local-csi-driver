clusterConfig:
  configYaml: |-
    apiVersion: local.storage.azure.com/v1alpha1
    kind: ClusterConfig
    enforceEphemeralPVC: true
    enforceHyperconvergedWithWebhook: true
clusterManagerMetricsService:
  ports:
  - name: https
    port: 8443
    protocol: TCP
    targetPort: 8443
  type: ClusterIP
kubernetesClusterDomain: cluster.local
node:
  csiProvisioner:
    args:
    - --v=2
    - --csi-address=/csi/lvm.sock
    - --node-deployment
    - --http-endpoint=:8090
    - --retry-interval-start=1s
    - --retry-interval-max=30s
    - --worker-threads=100
    - --kube-api-qps=100
    - --kube-api-burst=200
    - --extra-create-metadata
    - --feature-gates=Topology=true
    - --strict-topology=true
    - --enable-capacity
    - --capacity-ownerref-level=1
    - --capacity-poll-interval=15s
    image:
      repository: mcr.microsoft.com/oss/kubernetes-csi/csi-provisioner
      tag: v5.1.0
    imagePullPolicy: IfNotPresent
    resources:
      limits:
        cpu: 100m
        memory: 128Mi
      requests:
        cpu: 10m
        memory: 64Mi
  csiRegistrar:
    args:
    - --v=2
    - --csi-address=/csi/lvm.sock
    - --kubelet-registration-path=/var/lib/kubelet/plugins/cns.io/lvm.sock
    - --http-endpoint=:8091
    image:
      repository: mcr.microsoft.com/oss/kubernetes-csi/csi-node-driver-registrar
      tag: v2.12.0
    imagePullPolicy: IfNotPresent
    resources:
      limits:
        cpu: 100m
        memory: 128Mi
      requests:
        cpu: 10m
        memory: 64Mi
  driver:
    args:
    - --nodeName=$(NODE_NAME)
    - --podName=$(POD_NAME)
    - --namespace=$(POD_NAMESPACE)
    - --config=/etc/cluster-config.yaml
    - --csi-bind-address=unix:///csi/lvm.sock
    - --metrics-bind-address=:8080
    - --health-probe-bind-address=:8081
    - --worker-threads=100
    - --kube-api-qps=100
    - --kube-api-burst=200
    - --trace-address=jaeger-collector.observability.svc.cluster.local:4317
    - --trace-sample-rate=1000000
    - --trace-service-id=$(POD_NAME)
    - --metrics-secure=false
    - --v=2
    containerSecurityContext:
      allowPrivilegeEscalation: true
      capabilities:
        add:
        - SYS_ADMIN
      privileged: true
    image:
      repository: mcr.microsoft.com/oss/local-csi-driver/driver
      # When unset, uses the chart version as the tag.
      tag:
    imagePullPolicy: Always
    resources:
      limits:
        cpu: 500m
        memory: 600Mi
      requests:
        cpu: 10m
        memory: 64Mi
  lvmResizer:
    args:
    - --v=2
    - --csi-address=/csi/lvm.sock
    - --timeout=240s
    - --handle-volume-inuse-error=true
    - --http-endpoint=0.0.0.0:29756
    env:
      address: /csi/lvm.sock
    image:
      repository: mcr.microsoft.com/oss/kubernetes-csi/csi-resizer
      tag: v1.13.2
    imagePullPolicy: IfNotPresent
    resources:
      limits:
        memory: 500Mi
      requests:
        cpu: 10m
        memory: 20Mi
  nodeSelector: {}
  podSecurityContext:
    seccompProfile:
      type: Unconfined
  serviceAccount:
    annotations: {}
webhookService:
  ports:
  - port: 443
    protocol: TCP
    targetPort: 9443
  type: ClusterIP
